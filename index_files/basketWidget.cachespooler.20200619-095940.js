(function(e){function t(t){for(var n,i,o=t[0],c=t[1],l=t[2],d=0,b=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&b.push(s[i][0]),s[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(b.length)b.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,o=1;o<a.length;o++){var c=a[o];0!==s[c]&&(n=!1)}n&&(r.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},s={basketWidget:0},r=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/etc/clientlibs/frontend/sanitas-ovp-webpack/";var o=window["webpackOVP2"]=window["webpackOVP2"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;r.push([2,"chunk-vendors","chunk-common"]),a()})({"1bae":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("basket-widget",{attrs:{"app-version":e.$ovpVersion,configuratorUrl:e.configuratorUrl,expanded:"true"===e.expanded}})},s=[],r=a("690a"),i=a("2f62"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"basket"},[a("div",{class:e.iconClasses,on:{click:e.toggle}},[a("div",{staticClass:"basket_cart"},[a("sanitas-icon",{staticClass:"basket__cartIcon",attrs:{name:"ovp/warenkorb_leer",size:32}}),a("transition",{attrs:{name:"cartIndicatorTrans",mode:"out-in"}},[a("div",{key:e.productsInBasket,staticClass:"basket__cartIndicator"},[e._v("\n          "+e._s(e.productsInBasket)+"\n        ")])])],1),a("sanitas-icon",{staticClass:"basket__toggle",attrs:{name:"caret",direction:e.basketIsOpened?"up":"down",size:32}})],1),a("div",{attrs:{id:"basketOverlayContainer"}},[a("div",{attrs:{id:"basketOverlay"}},[a("transition",{attrs:{name:"basketOverlay"}},[a("div",{directives:[{name:"basket-stickiness",rawName:"v-basket-stickiness",value:!1,expression:"false"},{name:"show",rawName:"v-show",value:e.basketIsOpened,expression:"basketIsOpened"}],class:e.basketClasses,attrs:{"basket-stickiness-viewmode":e.$root.viewportLabel}},[e.basketSaveModalEnabled?a("basket-save-modal",{attrs:{tiny:"",data:e.basketInfo}}):e._e(),a("div",{staticClass:"basket_head"},[a("div",{staticClass:"line"},[e.isSaving?a("sanitas-button",{staticClass:"plain",attrs:{plain:"",icon:"ovp/speichern","data-test":"basketWidget_isSavingButton","icon-size":32,disabled:e.disabled}},[e._v("\n                "+e._s(e.label("basket_saving"))+"\n              ")]):a("sanitas-button",{staticClass:"plain",attrs:{plain:"","data-test":"basketWidget_saveButton",disabled:e.disabled},on:{click:function(t){return e.showBSModal()}}},[e._v("\n                "+e._s(e.label("save_button"))+"\n              ")]),a("sanitas-button",{staticClass:"plain",attrs:{plain:"","data-test":"basketWidget_closeButton"},on:{click:e.toggle}},[e._v("\n                "+e._s(e.label("close"))+"\n              ")])],1),a("div",{staticClass:"line line_total"},[a("ovp-price",{staticClass:"basket_head__total",attrs:{price:e.totalBasketPrice}}),a("div",{staticClass:"per-month-suffix"},[e._v(e._s(e.label("basket_inclusiveMT")))])],1),e.isConfigurator||!e.isEmptyBasket?a("div",{staticClass:"line"},[a("sanitas-button",{staticClass:"primary",attrs:{primary:"",type:"button","data-test":"basketWidget_goToBasketButton",disabled:e.isEmptyBasket},on:{click:e.goToBasket}},[e._v("\n                "+e._s(e.label("to_shopping_card"))+"\n              ")])],1):e._e()]),e.isEmptyBasket?a("div",{staticClass:"basket_section"},[e._v("\n            "+e._s(e.label("basket_widget_empty"))+"\n          ")]):e._l(e.persons,(function(t){return a("basket-person",{key:t.id,staticClass:"basket_section",attrs:{person:t,"compact-mode":!0},on:{openBasket:e.tryToOpenBasket}})})),e.isEmptyBasket&&!e.isConfigurator?a("div",{staticClass:"basket_section"},[a("sanitas-button",{staticClass:"secondary",attrs:{secondary:"","data-test":"basketWidget_goToConfiguratorButton"},on:{click:e.goToConfigurator}},[e._v("\n              "+e._s(e.label("navigate_to_calculator"))+"\n            ")])],1):e._e()],2)])],1)]),e.saveBasketNudgeAllowed?a("bop"):e._e()],1)},c=[],l=a("2ef0"),u=a("f87f"),d=a("de76"),b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("modal-loader",{attrs:{classes:"basket-save-modal",name:e.name,"close-on-mask-click":!1},on:{"before-open":e.closeSaveBasketNudge,opened:e.setOpen,closed:e.setClose}},[a("template",{slot:"header"},[a("h2",{staticClass:"basket-save-modal__title"},[e._v(e._s(e.label("basket_screen_modal_title")))])]),a("div",{staticClass:"basket-save-modal__content"},[a("p",[e._v(e._s(e.label("basket_screen_modal_text")))]),a("br"),a("basket-save-form",{attrs:{cancelable:"","multi-rows":"",tiny:e.tiny,data:e.data},on:{saved:e.savedHandler,canceled:function(t){return e.$sanitasModal.hide(e.name)}}})],1),a("template",{slot:"footer"},[a("div",{staticClass:"protection-container"},[a("protection",{attrs:{title:e.label("basket_screen_data_protection"),toggleable:""}},[a("span",{domProps:{innerHTML:e._s(e.dataProtectionText)}})])],1)])],2)},p=[],v=a("7b8c"),m=a("3113");function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){g(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var k={name:"BasketSaveModal",components:{BasketSaveForm:m["a"],Protection:v["a"]},props:{tiny:{type:Boolean,default:!1},name:{type:String,default:"basketSaveModal"},data:{type:Object,default:function(){return{}}}},computed:h({},Object(i["c"])(["label"]),{dataProtectionText:function(){var e=this.tiny?"":"_B";return this.label("basket_screen_data_protection_text"+e)}}),methods:h({},Object(i["b"])(["closeSaveBasketNudge","setSaveBasketModalOpenState"]),{setOpen:function(){this.setSaveBasketModalOpenState(!0)},setClose:function(){this.setSaveBasketModalOpenState(!1)},savedHandler:function(){this.$sanitasModal.hide(this.name),this.$emit("saved")}})},_=k,O=(a("ca40"),a("2877")),y=Object(O["a"])(_,b,p,!1,null,"74f4ad90",null),w=y.exports,j=a("9dac"),B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bop"},[a("div",{class:e.classes},[a("div",{staticClass:"bop-small"},[a("san-icon",{staticClass:"bop__close",attrs:{name:"close",size:32},on:{click:e.close}}),a("div",{staticClass:"bop-small_content"},[a("div",{staticClass:"bop__icon"},[a("san-icon",{attrs:{name:"ovp/timer",color:"white",size:48}})],1),a("div",{staticClass:"bop-small_text"},[a("div",[e._v(e._s(e.label("save_for_later")))]),a("div",[e._v(e._s(e.label("leave_your_contact_data")))])])]),e.saveBasketNudgeExpanded?e._e():a("div",{staticClass:"bop-small_action"},[a("a",{on:{click:e.expand}},[a("san-icon",{attrs:{name:"arrow",direction:"right",color:"original-green",size:24}}),e._v("\n          "+e._s(e.label("save_button"))+"\n        ")],1)])],1),a("transition",{attrs:{name:"something"}},[e.saveBasketNudgeExpanded?a("div",{staticClass:"bop-big"},[a("form",{on:{submit:function(t){return t.preventDefault(),e.save(t)}}},[a("div",{staticClass:"bop-big_input"},[a("san-text-input",{staticClass:"theme--light",attrs:{"data-test":"basketWidget_email",required:"",autofocus:"",negative:"",title:e.label("basket_email"),placeholder:e.label("basket_email"),errors:e.getErrors(e.$v.email)},on:{blur:function(t){return e.$v.email.$touch()}},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),a("div",[a("h2",{staticClass:"bop-big__title"},[e._v(e._s(e.label("basket_screen_data_protection")))]),a("div",{staticClass:"bop-big_text",domProps:{innerHTML:e._s(e.label("basket_screen_data_protection_text"))}})]),a("div",{staticClass:"bop-big_action"},[a("san-button",{staticClass:"secondary",attrs:{secondary:"",type:"button"},on:{click:e.close}},[e._v("\n              "+e._s(e.label("cancel_button_text"))+"\n            ")]),a("san-button",{staticClass:"primary",attrs:{primary:"",type:"submit"}},[e._v("\n              "+e._s(e.label("save_button"))+"\n            ")])],1)])]):e._e()])],1)])},S=[],P=a("be1f"),E=a("b5ae"),C=a("5e3e");function $(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$(Object(a),!0).forEach((function(t){x(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var D={name:"Bop",mixins:[P["a"]],components:{SanIcon:d["f"],SanButton:d["a"],SanTextInput:d["n"]},data:function(){return{email:null}},validations:function(){return{email:{KEY_REQUIRED:E["required"],EMAIL_ERROR:C["b"]}}},computed:N({},Object(i["c"])(["label","saveBasketNudgeOpen","saveBasketNudgeExpanded"]),{classes:function(){return{bop_container:!0,"bop_container--hidden":!this.saveBasketNudgeOpen,"bop_container--expanded":this.saveBasketNudgeExpanded}}}),mounted:function(){var e=this,t=parseInt(this.label("nudging_timer"));t>0&&window.setTimeout((function(){e.openSaveBasketNudge()}),t)},methods:N({},Object(i["b"])(["setContractOwner","saveBasket","openSaveBasketNudge","closeSaveBasketNudge","expandSaveBasketNudge"]),{close:function(){this.closeSaveBasketNudge()},expand:function(e){e.preventDefault(),this.expandSaveBasketNudge()},save:function(){var e=this;this.$v.email.$invalid||(this.setContractOwner({email:this.email}),this.saveBasket({nodelay:!0}),window.setTimeout((function(){e.close()}),250))}})},R=D,T=(a("d440"),Object(O["a"])(R,B,S,!1,null,"26a0df21",null)),I=T.exports,M=a("f121");function L(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function W(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(Object(a),!0).forEach((function(t){F(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function F(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var q=function(e){return!document.querySelector(e)},U={name:"BasketWidget",components:{OvpPrice:u["a"],SanitasIcon:d["f"],SanitasButton:d["a"],BasketPerson:j["a"],BasketSaveModal:w,Bop:I},props:{configuratorUrl:{type:String},expanded:{type:Boolean}},data:function(){return{basket:{title:null,email:null},openBasket:!1,nudgeWatcherRegistered:!1,nudgeWatcher:!1,config:M["a"],basketSaveModalEnabled:!1}},mounted:function(){var e=this;this.$root.isDesktop&&(this.registerEvents(),window.setTimeout((function(){e.openBasket=e.expanded&&e.hasProducts&&q("#onboardingScreen")&&q("#basketScreen")}),200)),this.persons.length>0&&(this.nudgeWatcherRegistered||(this.nudgeWatcher=this.$watch("persons.0.products",this.watchNudging)))},computed:W({},Object(i["c"])(["contractOwner","getPersonsForChat","totalBasketPrice","getProductById","isSaving","label","persons","hasProducts","saveBasketNudgeAllowed","chatOpened"]),{isConfigurator:function(){var e=Object(l["get"])(window,"location.pathname","");return e.indexOf(this.configuratorUrl)>=0},isEmptyBasket:function(){return!this.hasPersonItems||!this.hasProducts},basketInfo:function(){var e=Object.assign({},this.contractOwner,this.persons[0]);return{firstName:e.firstName||null,email:e.email||null}},basketIsOpened:function(){return this.openBasket},hasPersonItems:function(){return!Object(l["isEmpty"])(this.persons)},productsInBasket:function(){var e=this,t=0,a=!0,n=!1,s=void 0;try{for(var r,i=function(){var a=r.value,n=Object.keys(Object(l["get"])(a,"products",[]));n.forEach((function(n){e.getProductById(n,a.id).hidden||t++}))},o=this.persons[Symbol.iterator]();!(a=(r=o.next()).done);a=!0)i()}catch(c){n=!0,s=c}finally{try{a||null==o.return||o.return()}finally{if(n)throw s}}return t},disabled:function(){var e=this.hasProducts,t=this.isSaving;return t||!e},basketClasses:function(){var e=this.hasPersonItems,t=this.isEmptyBasket,a=this.basketIsOpened,n=this.isConfigurator;return{basket:!0,"basket--transparent":!e&&n,"basket--empty":t,"basket--open":a}},iconClasses:function(){var e=this.productsInBasket;return{basket_icon:!0,"basket_icon--active":e}}}),methods:W({},Object(i["b"])(["allowBasketSaveNudge","updateChatOpened"]),{shouldOpenBasket:function(){return this.hasProducts||q("#configuratorScreen")},showBSModal:function(){var e=this;this.basketSaveModalEnabled=!0,this.$nextTick((function(){e.$sanitasModal.show("basketSaveModal")}))},checkOpeningRules:function(){return!(!this.$root.isDesktop||!q("#basketScreen"))&&this.shouldOpenBasket()},registerEvents:function(){var e=this,t=window.addEventListener;t("sanitas-ovp-basket-open",Object(l["debounce"])((function(){e.checkOpeningRules()&&(e.openBasket=!0)}),500)),t("sanitas-ovp-basket-close",(function(){e.openBasket=!1})),t("sanitas_chat-enduser_conversation-started",(function(){window.dispatchEvent(new CustomEvent("sanitas_ovp-basket_updated",{detail:e.getPersonsForChat})),e.updateChatOpened(!0)})),t("sanitas_chat-enduser_conversation-ended",(function(){return e.updateChatOpened(!1)}))},goToConfigurator:function(){window.location.assign(window.location.origin+this.configuratorUrl)},goToBasket:function(){if(this.isConfigurator&&window.router){var e=window.router.currentRoute,t="Basket";if(e.name===t)return;window.router.push({name:t})}else window.location.assign(window.location.origin+this.configuratorUrl+"#/basket")},tryToOpenBasket:function(e){!this.$root.isMobile&&q("#onboardingScreen")&&!e&&Object.keys(this.persons).length&&window.dispatchEvent(new CustomEvent("sanitas-ovp-basket-open"))},toggle:function(){document.getElementById("onboardingScreen")?this.goToBasket():this.checkOpeningRules()||this.openBasket?this.openBasket=!this.openBasket:this.$root.isMobile&&this.shouldOpenBasket()&&this.goToBasket()},watchNudging:function(e,t){if(this.nudgeWatcherRegistered=!0,null===this.$store.state.basket.basketId&&!this.isMobile){var a=this.contractOwner.email,n=!0;Object(l["isObject"])(t)&&(n=0===Object.keys(t).length&&Object.keys(e).length>0),n&&!a&&(this.allowBasketSaveNudge(),this.nudgeWatcher(),this.nudgeWatcherRegistered=!1)}}}),watch:{persons:function(){this.nudgeWatcherRegistered||(this.nudgeWatcher=this.$watch("persons.0.products",this.watchNudging))},getPersonsForChat:{immediate:!0,handler:function(){this.chatOpened&&window.dispatchEvent(new CustomEvent("sanitas_ovp-basket_updated",{detail:this.getPersonsForChat}))}}}},G=U,z=(a("74a3"),Object(O["a"])(G,o,c,!1,null,"6ae69e0b",null)),A=z.exports,V=a("748a"),Y=a("1d42"),H=a("1d9b"),K=a("e3ee"),Q=a("f628"),X=a("74b5");function J(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?J(Object(a),!0).forEach((function(t){ee(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):J(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ee(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var te=r["a"].extend({name:"Wrapper",components:{"basket-widget":A},data:function(){return{viewportLabel:this.$currentViewport.label,isDesktop:"desktop"===this.$currentViewport.label,isMobile:"mobile"===this.$currentViewport.label,isIE:!!document.documentMode,isMS:!1!==(document.documentMode||/Edge\//.test(navigator.userAgent)),isProduction:!0,isDevelopment:!1}},mounted:function(){var e=this;window.addEventListener("resize",(function(){window.requestAnimationFrame((function(){var t=e.$currentViewport.label;e.viewportLabel=t,e.isDesktop="desktop"===t,e.isMobile="mobile"===t}))}))},props:{microserviceBaseUrl:{type:String,required:!0},configuratorUrl:{type:String,required:!0},resourceBaseUrl:{type:String,required:!0},language:{type:String,required:!0},contractStartDate:{type:String,required:!0},masterTreaty:{type:String,required:!0},collectiveContractNumber:{type:String},environment:{type:String,required:!0},expanded:{type:String}},computed:Z({},Object(i["c"])({basketContractStartDate:"contractStartDate",basketLanguage:"language"}),{},Object(i["c"])(["labelsLoaded","persons"])),methods:Z({},Object(i["b"])(["setContract","setLanguage"])),created:function(){var e=new V["a"]({store:this.$store,microserviceBaseUrl:this.microserviceBaseUrl,resourceBaseUrl:this.resourceBaseUrl});r["a"].use(e),this.$store.$backend=e;var t=this.language;if(this.basketLanguage&&this.basketLanguage===t&&this.labelsLoaded||this.setLanguage(t),!this.basketContractStartDate){var a=Object(Y["e"])(this.contractStartDate,Y["c"]);Object(H["a"])(Object(K["a"])(a))&&(a=Object(Q["a"])(Object(X["a"])(new Date,1)));var n={contractStartDate:Object(Y["e"])(a,Y["c"]),masterTreaty:this.masterTreaty};this.collectiveContractNumber&&(n.collectiveContractNumber=this.collectiveContractNumber),this.setContract(n)}}}),ae=te,ne=Object(O["a"])(ae,n,s,!1,null,null,null),se=ne.exports,re=a("4360");a("f06c");function ie(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(a),!0).forEach((function(t){ce(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ie(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ce(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var le="basketWidget",ue=document.getElementById(le),de=ue?oe({},ue.dataset):{};new se({el:ue,propsData:de,store:re["a"]})},2:function(e,t,a){e.exports=a("1bae")},2798:function(e,t,a){},3113:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.disabledTooltip,expression:"disabledTooltip"}],class:e.classes},[a("form",{on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[e.tiny?[a("sanitas-text-input",{attrs:{required:"",name:"email",autocomplete:"email",autofocus:"","data-test":"basketSaveForm_email",placeholder:e.label("basket_email"),title:e.label("basket_email"),errors:e.getErrors(e.$v.email)},on:{keydown:e.removeSpaces},model:{value:e.$v.email.$model,callback:function(t){e.$set(e.$v.email,"$model",t)},expression:"$v.email.$model"}})]:[a("div",{staticClass:"line"},[a("sanitas-text-input",{attrs:{name:"firstname",autofocus:"",autocomplete:"given-name","data-test":"basketSaveForm_firstName",maxLenngth:35,placeholder:e.label("basket_firstname"),title:e.label("basket_firstname"),errors:e.getErrors(e.$v.firstName)},model:{value:e.$v.firstName.$model,callback:function(t){e.$set(e.$v.firstName,"$model","string"===typeof t?t.trim():t)},expression:"$v.firstName.$model"}}),a("div",{staticClass:"padded"}),a("sanitas-text-input",{attrs:{required:"",name:"lastname",autocomplete:"family-name","data-test":"basketSaveForm_lastName",maxLength:60,placeholder:e.label("basket_lastname"),title:e.label("basket_lastname"),errors:e.getErrors(e.$v.lastName)},model:{value:e.$v.lastName.$model,callback:function(t){e.$set(e.$v.lastName,"$model","string"===typeof t?t.trim():t)},expression:"$v.lastName.$model"}})],1),a("div",{staticClass:"line"},[a("ovp-phone-input",{staticClass:"input__phone",attrs:{required:"","data-test":"basketSaveForm_phoneNumber",errors:e.getErrors(e.$v.phoneNumber),language:e.language,placeholder:e.label("basket_phoneNumber"),theme:e.theme,title:e.label("basket_phoneNumber"),validate:e.$v.phoneNumber},model:{value:e.$v.phoneNumber.$model,callback:function(t){e.$set(e.$v.phoneNumber,"$model",t)},expression:"$v.phoneNumber.$model"}}),a("div",{staticClass:"padded"}),a("sanitas-text-input",{attrs:{required:"",name:"email",autocomplete:"email","data-test":"basketSaveForm_email",placeholder:e.label("basket_email"),title:e.label("basket_email"),errors:e.getErrors(e.$v.email)},on:{keydown:e.removeSpaces},model:{value:e.$v.email.$model,callback:function(t){e.$set(e.$v.email,"$model",t)},expression:"$v.email.$model"}})],1)],a("div",{staticClass:"actions"},[e.cancelable?a("sanitas-button",{attrs:{secondary:"",type:"button","data-test":"basketSaveForm_cancelButton",disabled:e.pending},on:{click:function(t){return e.$emit("canceled")}}},[e._v(e._s(e.label("cancel_button_text")))]):e._e(),a("sanitas-button",{attrs:{type:"submit","data-test":"basketSaveForm_submitButton",disabled:e.isDisabled||e.pending,primary:!e.secondary,secondary:e.secondary}},[e._v(e._s(e.label(e.saveButtonLabel)))])],1),a("sanitas-message",{directives:[{name:"show",rawName:"v-show",value:e.hasNameChanged,expression:"hasNameChanged"}]},[e._v("\n      "+e._s(e.label("persons_data_name_changed"))+"\n    ")])],2)])},s=[],r=a("2ef0"),i=a("2f62"),o=a("de76"),c=a("43ee"),l=a("be1f"),u=a("8644"),d=a("bfe8"),b=a("5e3e"),p=a("4461");function v(e,t,a,n,s,r,i){try{var o=e[r](i),c=o.value}catch(l){return void a(l)}o.done?t(c):Promise.resolve(c).then(n,s)}function m(e){return function(){var t=this,a=arguments;return new Promise((function(n,s){var r=e.apply(t,a);function i(e){v(r,n,s,i,o,"next",e)}function o(e){v(r,n,s,i,o,"throw",e)}i(void 0)}))}}function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){g(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var k={name:"BasketSaveForm",mixins:[l["a"]],components:{OvpPhoneInput:c["a"],SanitasButton:o["a"],SanitasMessage:o["g"],SanitasTextInput:o["n"]},props:{tiny:{type:Boolean,default:!1},multiRows:{type:Boolean,default:!1},secondary:{type:Boolean,default:!1},cancelable:{type:Boolean,default:!1},saveButtonLabel:{type:String,default:"save_button"},ringbackRequested:{type:Boolean,default:!1},data:{type:Object,default:function(){return{}}}},data:function(){return{pending:!1,submitTried:!1,hasNameChanged:!1,email:this.data.email,phoneNumber:this.data.phoneNumber,firstName:this.data.firstName,lastName:this.data.lastName,debounceSaveBasket:{}}},validations:function(){var e={email:{KEY_REQUIRED:b["i"],EMAIL_ERROR:b["b"]}};return this.tiny||Object.assign(e,{phoneNumber:{KEY_REQUIRED:b["i"],REGEX_ERROR:function(e){return b["f"].call(this,e)}},firstName:{REGEX_ERROR:b["c"]},lastName:{KEY_REQUIRED:b["i"],REGEX_ERROR:b["h"]}}),e},mounted:function(){this.debounceSaveBasket=Object(r["debounce"])(this.saveBasketToBackend,200)},computed:h({},Object(i["c"])(["basketForRequest","label","language","hasLabel","hasProducts","hasProductWarnings"]),{classes:function(){return{"basket-save-form":!0,"basket-save-form--tiny":this.tiny,"basket-save-form--disabled":this.isDisabled||this.pending,"basket-save-form--multi-rows":this.multiRows,"basket-save-form--cancelable":this.cancelable}},theme:function(){return this.secondary?"dark":"light"},isDisabled:function(){return!this.tiny&&(this.hasProductWarnings||!this.hasProducts)},disabledTooltip:function(){return!!this.isDisabled&&this.label("basket_invalid_products_save_disabled")}}),methods:h({},Object(i["b"])(["saveBasket","setContractOwner","setFirstName","setLastName","setGeneralError","resetGeneralError"]),{},Object(i["b"])("snackbar",["showSnackbar"]),{removeSpaces:function(e){32===e.keyCode&&e.preventDefault()},slugifyName:function(e){var t=Object(r["get"])(this,e,!1);if(t){var a=Object(u["b"])(t),n=a!==t;n&&(this.$set(this,e,a),this.hasNameChanged=n)}},submit:function(){this.pending=!0,this.submitTried=!0,this.hasNameChanged=!1,this.$v.$touch();var e=!0;this.tiny||(this.slugifyName("lastName"),this.slugifyName("firstName"),e=!this.hasNameChanged),this.$v.$invalid&&(e=!1),e&&!this.$v.$pending?this.debounceSaveBasket():this.pending=!1},saveBasketToBackend:function(){var e=m(regeneratorRuntime.mark((function e(){var t,a,n,s,r,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.tiny,a=this.email,n=this.firstName,s=this.lastName,r=this.phoneNumber,t){e.next=4;break}return e.next=4,this.setLastName(s);case 4:if(!n){e.next=7;break}return e.next=7,this.setFirstName(n);case 7:return e.next=9,this.setContractOwner({email:a,phoneNumber:r});case 9:this.saveBasket({egate:!t,nodelay:!0,emailType:t?"OFFER_REENTRY_WITHOUT_EGATE":"OFFER_REENTRY"}).then((function(e){var t=null===e||void 0===e?void 0:e.data;e.infoMessages.length>0&&i.setGeneralError(e.infoMessages[0]),t.egate?Object(p["i"])("ovp",t):Object(p["o"])("ovp","OvpBasketSavedNoEgate"),i.showSnackbar({text:i.label(i.ringbackRequested?"basket_saved_and_ringback_requested":"basket_saved"),type:"success"}),i.resetGeneralError(),i.pending=!1,i.$emit("saved")})).catch((function(e){var t=Object(d["a"])(e);t&&i.hasLabel(t)||(t=!0),i.showSnackbar({text:i.label(t),type:"error"}),i.setGeneralError(t),i.pending=!1}));case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()})},_=k,O=(a("8398"),a("2877")),y=Object(O["a"])(_,n,s,!1,null,"c458f646",null);t["a"]=y.exports},"3b42":function(e,t,a){},"5bae":function(e,t,a){"use strict";var n=a("2798"),s=a.n(n);s.a},"62c9":function(e,t,a){},"74a3":function(e,t,a){"use strict";var n=a("b4cc"),s=a.n(n);s.a},"7b8c":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.classes},[a("div",{staticClass:"protection__head",on:{click:e.toggle}},[a("span",{staticClass:"protection__title"},[e._v(e._s(e.title))]),a("sanitas-icon",{directives:[{name:"show",rawName:"v-show",value:e.toggleable,expression:"toggleable"}],attrs:{name:"caret",color:"original-green",direction:e.show?"up":"down",size:30}})],1),a("transition",[e.show?a("span",{staticClass:"protection__bottom"},[e._t("default")],2):e._e()])],1)},s=[],r=a("de76"),i={name:"Protection",components:{SanitasIcon:r["f"]},props:{title:{type:String},toggleable:{type:Boolean,default:!1}},data:function(){return{show:!0}},computed:{classes:function(){return{protection:!0,"protection--toggleable":this.toggleable}}},methods:{toggle:function(){this.toggleable&&(this.show=!this.show)}}},o=i,c=(a("5bae"),a("2877")),l=Object(c["a"])(o,n,s,!1,null,"2af258e3",null);t["a"]=l.exports},8398:function(e,t,a){"use strict";var n=a("62c9"),s=a.n(n);s.a},"9e06":function(e,t,a){},b4cc:function(e,t,a){},ca40:function(e,t,a){"use strict";var n=a("3b42"),s=a.n(n);s.a},d440:function(e,t,a){"use strict";var n=a("9e06"),s=a.n(n);s.a}});
//# sourceMappingURL=basketWidget.js.map