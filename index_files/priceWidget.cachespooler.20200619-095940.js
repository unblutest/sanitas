(function(e){function t(t){for(var i,a,s=t[0],c=t[1],l=t[2],d=0,p=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);u&&u(t);while(p.length)p.shift()();return n.push.apply(n,l||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],i=!0,s=1;s<r.length;s++){var c=r[s];0!==o[c]&&(i=!1)}i&&(n.splice(t--,1),e=a(a.s=r[0]))}return e}var i={},o={priceWidget:0},n=[];function a(t){if(i[t])return i[t].exports;var r=i[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=i,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(r,i,function(t){return e[t]}.bind(null,i));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/etc/clientlibs/frontend/sanitas-ovp-webpack/";var s=window["webpackOVP2"]=window["webpackOVP2"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;n.push([1,"chunk-vendors","chunk-common"]),r()})({1:function(e,t,r){e.exports=r("2666")},1959:function(e,t,r){},"21ce":function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"persons"}},[e.busy?r("sanitas-loading"):[r("form",{on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[r("div",{staticClass:"section"},[r("div",{staticClass:"section_content"},[r("div",{staticClass:"form form--600width"},[r("div",{staticClass:"inline"},[r("sanitas-zip-chooser",{staticClass:"location-field",attrs:{required:"",title:e.label("zip_chooser_label"),placeholder:e.label("zip_chooser_placeholder"),autofocus:!e.hasLocation,tooltip:e.label("location_tooltip"),errors:e.getErrors(e.$v.location),label:e.label,"data-function":e.getLocation,"info-message-no-result":e.label("zip_chooser_noResuts"),"info-message-backend-error":e.label("general_error")},model:{value:e.location,callback:function(t){e.location=t},expression:"location"}})],1),r("div",{staticClass:"inline inline--one-third"},[r("div",{staticClass:"input-modal-container"},[r("sanitas-date-input",{attrs:{required:"",lazy:"",name:"vertragsbeginn","data-test":"persons_contractStartDate",min:e.minContractStartDate,max:e.maxContractStartDate,mask:"##.##.####",placeholder:e.label("date_placeholder"),title:e.label("vertragsbeginn"),label:e.label,errors:e.getErrors(e.$v.contractStartDate)},on:{blur:function(t){return e.$v.contractStartDate.$touch()}},model:{value:e.contractStartDate,callback:function(t){e.contractStartDate=t},expression:"contractStartDate"}}),r("sanitas-icon",{attrs:{name:"information",color:"original-green",size:18},on:{click:function(t){e.showVertragsbeginnModal=!0}}})],1),e.showVertragsbeginnModal?r("sanitas-modal",{attrs:{"close-icon":""},on:{close:function(t){e.showVertragsbeginnModal=!1}}},[r("tooltip-contract-date")],1):e._e()],1),e.isCollective?r("div",{staticClass:"inline"},[r("div",{staticClass:"input-modal-container"},[r("sanitas-radio-group",{attrs:{horizontal:"","data-test":"persons_isCollective",title:e.label("collective_toggle_label"),items:e.collectiveToggleItems},model:{value:e.isCollective,callback:function(t){e.isCollective=t},expression:"isCollective"}}),r("sanitas-icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.label("collective_tooltip"),expression:"label('collective_tooltip')"}],staticClass:"collective_info_icon",attrs:{tabindex:"-1",name:"information",color:"original-green",size:18}})],1)]):e._e()]),e.showCollectiveForm?r("div",{staticClass:"form form--collective"},[r("div",{staticClass:"inline"},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.isCollective,expression:"isCollective"}],staticClass:"input-modal-container"},[r("sanitas-text-input",{attrs:{"data-test":"persons_collectivePartnerId",required:"",title:e.label("collective_partners_dropdown_label"),maxLength:7,errors:e.getErrors(e.$v.collectivePartnerId)},on:{blur:function(t){return e.$v.collectivePartnerId.$touch()}},model:{value:e.collectivePartnerId,callback:function(t){e.collectivePartnerId=t},expression:"collectivePartnerId"}}),r("sanitas-icon",{attrs:{name:"information",color:"original-green",size:18},on:{click:function(t){e.showCollectiveIdModal=!0}}}),e.showCollectiveIdModal?r("sanitas-modal",{attrs:{"close-icon":"",name:"collectiveIdModal"},on:{close:function(t){e.showCollectiveIdModal=!1}}},[r("modal-content",[r("div",{domProps:{innerHTML:e._s(e.label("collectiveId_tooltip"))}})])],1):e._e()],1)])]):e._e()])]),r("div",{staticClass:"section"},[r("transition-group",{attrs:{name:"personList",tag:"div"}},[e._l(e.$v.people.$each.$iter,(function(t,i){return[r("div",{key:t.$model.id,staticClass:"person",class:{person:!0,"person--entry":"Entry"===e.source}},[r("ovp-person",{key:t.$model.id,attrs:{validation:t,"validation-errors-getter":e.getErrors,person:t.$model,autofocus:e.hasLocation,deletable:i>0,"person-groups":e.collectivePersonGroups},on:{save:e.submit,delete:function(t){return e.deletePerson(i)}}})],1)]}))],2),r("div",{staticClass:"section_actions"},[r("div",{staticClass:"section_left"},[r("sanitas-button",{staticClass:"secondary",attrs:{secondary:"","data-test":"persons_addButton",disabled:!e.isPersonsAddEnabled()},on:{click:e.addPerson}},[e._v("\n              "+e._s(e.label("person_add"))+"\n            ")])],1),r("div",{staticClass:"section_right"},[e.cancelable?r("sanitas-button",{staticClass:"secondary",attrs:{type:"button",secondary:"","data-test":"persons_cancelButton"},on:{click:function(t){return e.$emit("cancel")}}},[e._v("\n              "+e._s(e.label("cancel_button_text"))+"\n            ")]):e._e(),r("sanitas-button",{staticClass:"primary",attrs:{type:"submit","data-test":"calculate_premium_button",primary:""}},[e._v("\n              "+e._s(e.label("calculate_premium"))+"\n            ")])],1)])],1)]),e.hasMessages?r("div",{staticClass:"person-messages"},[e.onlyBabyPersons?r("sanitas-message",{attrs:{severity:"warning",icon:"help",text:e.label("persons_unborn_text")}}):e._e(),e.contractStartDateUpdated?r("sanitas-message",{attrs:{severity:"warning",icon:"help",text:e.label("persons_contractStartDate_text")}}):e._e(),r("sanitas-message",{directives:[{name:"show",rawName:"v-show",value:e.hasNameChanged,expression:"hasNameChanged"}]},[e._v("\n        "+e._s(e.label("persons_data_name_changed"))+"\n      ")])],1):e._e()]],2)},o=[],n=r("2ef0"),a=r("2f62"),s=r("b166"),c=r("a618"),l=r("74b5"),u=r("e3ee"),d=r("1d9b"),p=r("7677"),f=r("ba1e"),h=r("1212"),v=r("de76"),b=r("db6d"),m=r("a01a"),g=r("2fac"),_=r("be1f"),O=r("5e3e"),P=r("b5ae"),y=r("1d42"),C=r("5af1"),w=r("52db"),j=r("8644"),S=r("3beb"),I=r("4461"),D=r("f121");function N(e,t,r,i,o,n,a){try{var s=e[n](a),c=s.value}catch(l){return void r(l)}s.done?t(c):Promise.resolve(c).then(i,o)}function k(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var n=e.apply(t,r);function a(e){N(n,i,o,a,s,"next",e)}function s(e){N(n,i,o,a,s,"throw",e)}a(void 0)}))}}function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function B(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $={name:"Persons",mixins:[_["a"]],components:{ModalContent:m["a"],OvpPerson:b["a"],SanitasButton:v["a"],SanitasDateInput:v["d"],SanitasIcon:v["f"],SanitasLoading:v["k"],SanitasMessage:v["g"],SanitasModal:v["l"],SanitasRadioGroup:v["j"],SanitasTextInput:v["n"],SanitasZipChooser:v["m"],TooltipContractDate:g["a"]},props:{source:String,cancelable:{type:Boolean,default:!1},linkToCollectiveContract:{type:String,default:""}},data:function(){return{contractStartDate:null,isCollective:!1,collectivePartnerId:null,location:{},people:[],submitTried:!1,onlyBabyPersons:!1,contractStartDateUpdated:!1,busy:!1,sourceFromUrlParam:null,showVertragsbeginnModal:!1,showCollectiveIdModal:!1,hasNameChanged:!1,phoneNumber:null}},validations:{contractStartDate:{KEY_REQUIRED:O["i"],ISO_DATE_ERROR:O["e"]},location:{KEY_REQUIRED:O["i"]},collectivePartnerId:{KEY_REQUIRED:Object(P["requiredIf"])((function(){return this.submitTried&&this.isCollective})),REGEX_ERROR:function(e){return Object(O["a"])(e)&&(this.isCollectivePartner(e)||!this.isCollective)}},people:{$each:{dateOfBirth:{KEY_REQUIRED:O["i"],ISO_DATE_ERROR:O["e"]},firstName:{MIN_ERROR:Object(P["minLength"])(2)},gender:{KEY_REQUIRED:O["i"]},personGroup:{KEY_REQUIRED:Object(P["requiredIf"])((function(){return this.submitTried&&this.isCollective&&this.collectivePersonGroups.length>0}))}}}},created:function(){window.dispatchEvent(new CustomEvent("sanitas-ovp-basket-close")),localStorage.removeItem("sanitas-dap");var e=this.queryParams;this.presetFormParameters(e);var t=this.collectiveContractNumber||this.selectedCollectiveContractNumber;t&&this.initalizeCollectiveContract(t),this.initalizePersons(e),Object(n["get"])(e,"skipPersonsScreen",!1)&&(this.busy=!0,setTimeout(this.submit,1e3))},mounted:function(){var e,t=this;Object(I["x"])("ovp",{ovpScreen:"persons"});var r,i,o,n,a,s="sanitasComAliasReferrer",c=sessionStorage.getItem(s),l="PriceWidget"===this.source,u=null===(e=document.querySelector('link[hreflang="x-default"]'))||void 0===e?void 0:e.href;l?r=u||(null===(i=window)||void 0===i?void 0:null===(o=i.location)||void 0===o?void 0:o.href):r=c||u||(null===(n=window)||void 0===n?void 0:null===(a=n.location)||void 0===a?void 0:a.href);Object(I["o"])("ovp","OvpScreenPersonsFunneled",{personsScreenSource:this.sourceFromUrlParam,entryElementAliasUrl:r,vepa:this.partnerId||"",bundleCode:this.bundleCode||""}),this.$watch((function(e){return[e.contractStartDate,e.isCollective].join()}),(function(e,r){var i=e.split(","),o=r.split(","),n="true"===i[1];if(!n)return t.collectivePartnerId=null,void t.resetCollectiveContract();var a=!1===t.$v.contractStartDate.$invalid;0!==t.collectivePartnersForDropdown.length&&i[0]===o[0]||!a||t.loadCollectiveConfig({contractStartDate:Object(y["e"])(i[0],y["c"])})}))},computed:E({},Object(a["c"])(["address","label","persons","hasPartner","partnerId","bundleCode","hasProducts","isCollectivePartner","getCollectivePartner","collectiveContractNumber","getCollectivePersonGroups","collectivePartnersForDropdown","selectedCollectiveContractNumber"]),{},Object(a["c"])({basketContractStartDate:"contractStartDate"}),{queryParams:function(){return Object(S["a"])(this.$route)},hasMessages:function(){return this.onlyBabyPersons||this.contractStartDateUpdated||this.hasNameChanged},collectivePersonGroups:function(){return this.getCollectivePersonGroups(this.collectivePartnerId)},showCollectiveForm:function(){return!this.hasPartner&&(this.isCollective||!Object(n["isEmpty"])(this.selectedCollectiveContractNumber))},hasLocation:function(){return!Object(n["isEmpty"])(this.location)},minContractStartDate:function(){return Object(s["a"])(Object(c["a"])(new Date,3),y["c"])},maxContractStartDate:function(){return Object(s["a"])(Object(l["a"])(new Date,18),y["c"])},collectiveToggleItems:function(){return[{value:!0,text:this.label("toggle_yes")},{value:!1,text:this.label("toggle_no")}]}}),methods:E({},Object(a["b"])(["updateContractInformation","updateSelectedCriteriaForPersons","loadCollectiveConfig","removeEntryData","resetCollectiveConfig","setAddress","setSelectedCollectiveContractNumber"]),{getLocation:function(e,t){var r=this;return new Promise((function(i,o){var n={query:t,type:e};r.$backend.locations.getLocations(n).then((function(e){i(e.data)})).catch((function(e){o(e)}))}))},presetFormParameters:function(e){if(this.contractStartDate=Object(y["e"])(this.basketContractStartDate,y["c"]),this.sourceFromUrlParam=Object(n["get"])(e,"source",this.source),this.location=this.address.zipCode?this.address:{},!this.hasLocation){var t=e.locationNumber,r=e.zipCode,i=e.zipCodeAddon;t&&r&&i&&this.presetAddress({locationNumber:t,zipCode:r,zipCodeAddon:i})}},presetAddress:function(){var e=k(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.setAddress(t);case 2:this.location=this.address;case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),initalizeCollectiveContract:function(){var e=k(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.loadCollectiveConfig({contractStartDate:Object(y["e"])(this.contractStartDate,y["c"])}).then((function(){r.collectivePartnerId=t,r.isCollective=!0})));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),initalizePersons:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.birthdate,i=t.birthDate,o=t.firstName,a=t.gender;if(this.persons.length>0)this.persons.forEach((function(t){var r=Object(n["pick"])(t,["id","firstName","dateOfBirth","gender","order","personGroup"]);e.people.push(r)}));else{var s=D["a"].sessionId,c=r||i;if(c&&a){var l={id:s,firstName:o,dateOfBirth:Object(y["e"])(c,y["c"]),gender:a.toUpperCase()};this.addPerson(l)}else this.addPerson({id:s})}},isPersonsAddEnabled:function(){return this.people.length<D["a"].personsMaxQty},checkContractStartDate:function(){var e=Object(u["a"])(this.contractStartDate);if(e)if(Object(d["a"])(e)){var t=Object(u["a"])(Object(s["a"])(Object(c["a"])(new Date,3),y["c"]));if(Object(p["a"])(e,t))return this.contractStartDateUpdated=!0,this.contractStartDate=Object(y["e"])(t,y["c"]),!1}else if(Object(f["a"])(e)){var r=Object(u["a"])(Object(s["a"])(Object(l["a"])(new Date,18),y["c"]));if(Object(h["a"])(e,r))return this.contractStartDateUpdated=!0,this.contractStartDate=Object(y["e"])(r,y["c"]),!1}return!0},checkBaby:function(){var e=Object(C["d"])(this.people,new Date),t=e.onlyBaby,r=e.ageOfBaby;return!t||(this.onlyBabyPersons=!0,this.contractStartDate===r)||(this.contractStartDate=r,!1)},slugifyName:function(e,t,r){if(r){var i=Object(j["b"])(r),o=i!==r;o&&(this.$set(this.people[e],t,i),this.hasNameChanged=o)}},updatePeopleOrder:function(){Object(n["forEach"])(this.people,(function(e,t){e.order=t+1}))},slugifyPersons:function(){var e=this;return this.hasNameChanged=!1,Object(n["map"])(this.people,(function(t,r){e.slugifyName(r,"lastName",t.lastName),e.slugifyName(r,"firstName",t.firstName)})),this.hasNameChanged},updateState:function(){var e=this,t=0===this.persons.length,r={contractStartDate:Object(y["e"])(this.contractStartDate,y["c"]),location:this.location,persons:this.people};if(this.collectivePartnerId&&this.isCollective){var i=this.getCollectivePartner(this.collectivePartnerId);r.collectivePartner={collectiveContractNumber:i.contractNumber,collectiveChannel:i.channel,masterTreaty:i.masterTreaty}}Object(I["x"])("ovp",{sessionId:r.persons[0].id}).then((function(){if(t)return Object(I["v"])()})).then((function(){var t,i,o,n=e.location,a=n.primeRegion,s=n.zipCode,c=e.$router?Object(S["b"])(e.$router.currentRoute,!0):(null===(t=document.querySelector('link[hreflang="x-default"]'))||void 0===t?void 0:t.href)||(null===(i=window)||void 0===i?void 0:null===(o=i.location)||void 0===o?void 0:o.href),l={firstPerson:{gender:r.persons[0].gender,birthYear:r.persons[0].dateOfBirth.substring(0,4)},location:{plz:s,premiumRegion:a},page:{aliasUrl:c}};return r&&r.collectivePartner?l.collectivePartner=r.collectivePartner:l.collectivePartner={collectiveContractNumber:""},l.vepa=e.partnerId||"",l.bundleCode=e.bundleCode||"",Object(I["p"])(l)})),this.updateContractInformation(r).then((function(){e.updateSelectedCriteriaForPersons(e.people),e.$emit("save")})),window.setTimeout((function(){"Configurator"===e.source&&window.scrollTo(0,0),!t&&e.hasProducts&&window.dispatchEvent(new CustomEvent("sanitas-ovp-basket-open"))}),100)},submit:function(){this.busy=!0,this.submitTried=!0,this.$v.$touch(),this.$v.$invalid?this.busy=!1:this.checkBaby()||(this.busy=!1),this.checkContractStartDate()||(this.busy=!1),this.slugifyPersons()&&(this.busy=!1),this.busy&&(localStorage.removeItem(D["a"].ovpEntryStorageKey),this.updateState())},addPerson:function(e){var t=Object(w["a"])(this.people,e);this.persons.length>0&&this.persons[0].lastName&&(t.lastName=this.persons[0].lastName),this.people.push(t),this.collectivePartnerId&&this.setCollectivePersonGroupWhenOnlyOneGroup(this.collectivePartnerId)},deletePerson:function(e){this.people.splice(e,1),this.updatePeopleOrder(),0===this.people.length&&this.addPerson()},setCollectivePersonGroups:function(e){var t=this.getCollectivePersonGroups(e);this.people.map((function(e){return 1===t.length?e.personGroup=t[0].value:e.personGroup=null,e}))},setCollectivePersonGroupWhenOnlyOneGroup:function(e){var t=this.getCollectivePersonGroups(e);this.people.map((function(e){return 1===t.length&&(e.personGroup=t[0].value),e}))},resetCollectiveContract:function(){this.resetCollectiveConfig(),this.people.map((function(e){return e.personGroup=null,e}))}}),watch:{contractStartDate:function(){var e=this;this.$nextTick((function(){e.contractStartDate!==e.basketContractStartDate&&e.resetCollectiveContract()}))},collectivePartnerId:function(e){e!==this.collectiveContractNumber&&this.setCollectivePersonGroups(e),this.setSelectedCollectiveContractNumber(e)}}},L=$,A=(r("8bab8"),r("2877")),M=Object(A["a"])(L,i,o,!1,null,"4367fb40",null);t["a"]=M.exports},2666:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("price-widget",{attrs:{productId:e.productId,"app-version":e.$ovpVersion}})},o=[],n=r("690a"),a=r("2f62"),s=r("1d9b"),c=r("e3ee"),l=r("b166"),u=r("f628"),d=r("74b5"),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"widget",class:e.classes,attrs:{"data-product-id":e.productId}},[e.labelsLoaded||this.product?[r("div",{staticClass:"widget-header"},[e.activePersonId?[r("persons-bar",{staticClass:"widget-personbar",attrs:{narrow:"",persons:e.persons,selected:e.activePersonId},on:{addPerson:function(t){e.showPersons=!0},selectPerson:e.switchPersonScope}})]:[r("div",{staticClass:"widget-header__title"},[e._v(e._s(e.label("pricewidget_personcapture_info")))]),r("sanitas-button",{attrs:{primary:"","data-test":"priceWidget_personCaptureButton"},on:{click:function(t){e.showPersons=!0}}},[e._v("\n          "+e._s(e.label("pricewidget_personcapture"))+"\n        ")])],!0===e.showPersons?r("sanitas-modal",{staticClass:"persons-modal",attrs:{"close-on-mask-click":!1},on:{close:function(t){e.showPersons=!1}}},[r("modal-content",{staticClass:"persons-container"},[r("persons",{attrs:{cancelable:"",source:e.$options.name},on:{cancel:function(t){e.showPersons=!1},save:function(t){e.showPersons=!1}}})],1)],1):e._e()],2),r("div",{staticClass:"widget-content"},[r("div",{staticClass:"widget-content__product"},[e._v(e._s(e.productName))]),e.hasErrorMessage?r("sanitas-message",{staticClass:"widget-error"},[r("div",{staticClass:"widget-error__content",attrs:{"data-error-code":e.availabilityLabels.errorCode}},[r("div",[r("b",[e._v(e._s(e.availabilityLabels.text))])]),e.hasOtherAvmProductInBasket?r("div",[r("span",[e._v(e._s(e.label("delete_product_from_basket_change_doctor"))+":")]),r("span",{staticClass:"doctor_delete_product_name"},[e._v(e._s(e.avmProductFromBasket.name))])]):r("div",{domProps:{innerHTML:e._s(e.errorDescription)}})])]):[r("ovp-price",{staticClass:"widget-content__price",attrs:{suffix:e.label("basket_inclusiveMT"),price:e.productPrice}}),e.productCriteria?r("div",{staticClass:"widget-options"},[e.productCriteria.franchise&&Object.keys(e.productCriteria.franchise.options).length>1?r("div",{staticClass:"widget-option"},[r("div",{staticClass:"widget-option__title"},[e._v("\n              "+e._s(e.getCriteriaText(e.product,"franchise","title"))+"\n\n              "),r("sanitas-icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.getCriteriaText(e.product,"franchise","tooltip"),expression:"getCriteriaText(product, 'franchise', 'tooltip')"}],attrs:{name:"information",color:"original-green",size:18}})],1),r("franchise-selector",{attrs:{inline:"",orderBy:"asc",currency:!1,selected:e.getSelectedOption("franchise"),items:e.productCriteria.franchise.options},on:{select:function(t){return e.selectCriteria("franchise",t)}}})],1):e._e(),e.productCriteria.variante?r("div",{staticClass:"widget-option"},[r("div",{staticClass:"widget-option__title"},[e._v("\n              "+e._s(e.getCriteriaText(e.product,"variante","title"))+"\n\n              "),r("sanitas-icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.getCriteriaText(e.product,"variante","tooltip"),expression:"getCriteriaText(product, 'variante', 'tooltip')"}],attrs:{name:"information",color:"sanitas-green",size:18}})],1),r("franchise-selector",{attrs:{inline:"",orderBy:"asc",currency:!1,selected:e.getSelectedOption("variante"),items:e.productCriteria.variante.options,transform:!1},on:{select:function(t){return e.selectCriteria("variante",t)}}})],1):e._e(),e.productCriteria.versicherungssumme?r("div",{staticClass:"widget-option"},[r("div",{staticClass:"widget-option__title"},[e._v("\n              "+e._s(e.getCriteriaText(e.product,"versicherungssumme","title"))+"\n\n              "),r("sanitas-icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.getCriteriaText(e.product,"versicherungssumme","tooltip"),expression:"getCriteriaText(product, 'versicherungssumme', 'tooltip')"}],attrs:{name:"information",color:"sanitas-green",size:18}})],1),r("franchise-selector",{attrs:{inline:"",orderBy:"asc",currency:!1,selected:e.getSelectedOption("versicherungssumme"),items:e.productCriteria.versicherungssumme.options,transform:!1},on:{select:function(t){return e.selectCriteria("versicherungssumme",t)}}})],1):e._e(),e.productCriteria.accident?r("div",{staticClass:"widget-option"},[r("div",{staticClass:"widget-option__title"},[e._v("\n              "+e._s(e.getCriteriaText(e.product,"accident","title"))+"\n\n              "),r("sanitas-icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.getCriteriaText(e.product,"accident","tooltip"),expression:"getCriteriaText(product, 'accident', 'tooltip')"}],attrs:{name:"information",color:"original-green",size:18}})],1),r("accident-toggle",{attrs:{value:e.getSelectedOption("accident"),"label-true":e.label("accident_yes"),"label-false":e.label("accident_no")},on:{change:function(t){return e.selectCriteria("accident",t)}}})],1):e._e()]):e._e(),r("div",{staticClass:"widget-actions"},[e.activePersonId?r("product-actions",{attrs:{primary:"",available:e.isProductAvailable&&!e.isProductDisabled,product:e.product,"person-id":e.activePersonId},on:{show:e.openMedicalOfficeSearch}}):e._e()],1),e.personId?r("div",{staticClass:"widget-doctor"},[e.showMedicalOfficeSearch?r("medical-office-search",{staticClass:"widget-medical-office-search",attrs:{"contract-start-date":e.contractStartDate,product:e.product}}):e._e(),r("product-doctor",{attrs:{"person-id":e.personId,product:e.product},on:{show:e.openMedicalOfficeSearch}})],1):e._e()]],2)]:r("sanitas-loading")],2)},f=[],h=r("2ef0"),v=r("72bf"),b=r.n(v),m=r("de76"),g=r("6e7d"),_=r("f87f"),O=r("21ce"),P=r("ae29"),y=r("a01a"),C=r("c625"),w=r("fa5e"),j=r("44a2"),S=r("117e"),I=r("185d");function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function k(e,t,r){return t&&N(e.prototype,t),r&&N(e,r),e}var x=function(){function e(){D(this,e),this.queue=[],this.results=[],this.errors=[],this.runningPromise=!1}return k(e,[{key:"_dequeue",value:function(){var e=this;if(this.runningPromise)return!1;var t=this.queue.shift();return!!t&&(this.runningPromise=!0,t.promise().then((function(r){e.runningPromise=!1,t.resolve(r),e._dequeue()})).catch((function(r){e.runningPromise=!1,t.reject(r),e._dequeue()})),!0)}},{key:"addPromise",value:function(e){var t=this;if(e instanceof Promise)throw new Error("You need to wrap your promise in a function. So that it's the PromiseQueue that executes it.");return new Promise((function(r,i){t.queue.push({promise:e,resolve:r,reject:i}),t._dequeue()})).catch((function(e){return t.errors.push(e),e})).then((function(e){return e instanceof Error||t.results.push(e),e}))}},{key:"getResults",value:function(){return this.results}}]),e}(),E={queues:{},getQueue:function(e){return this.queues[e]||(this.queues[e]=new x),this.queues[e]}},B=r("1fd1"),$=r("1d42"),L=r("4461"),A=r("f121");function M(e){return M="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var z={name:"PriceWidget",components:{AccidentToggle:j["a"],FranchiseSelector:C["a"],MedicalOfficeSearch:w["a"],ModalContent:y["a"],OvpPrice:_["a"],Persons:O["a"],PersonsBar:P["a"],ProductActions:S["a"],ProductDoctor:I["a"],SanitasButton:m["a"],SanitasIcon:m["f"],SanitasLoading:m["k"],SanitasMessage:m["g"],SanitasModal:m["l"]},props:{productId:{type:String,required:!0},trackingContext:{type:String,default:"PriceWidget"}},data:function(){return{showPersons:!1,icon:"alert"}},created:function(){var e=this;Object(L["v"])(!0),Object(L["g"])(this.trackingContext);var t={},r=E.getQueue("pw");if(this.$route&&(t=this.$route.query),Object(h["isEmpty"])(t)&&!Object(h["isEmpty"])(window.location.search)&&(t=b.a.parse(window.location.search)),!this.activePersonId||!Object(h["isEmpty"])(t)){var i,o=[],n=Object($["e"])(this.contractStartDate,"yyyy-MM-dd"),a=Object(h["get"])(t,"birthdate");if(Object($["j"])(a)&&Object(h["has"])(t,"gender")&&Object(h["has"])(t,"zipCode")){o.push({id:A["a"].sessionId,order:1,dateOfBirth:Object($["e"])(a,$["c"]),firstName:Object(h["get"])(t,"firstName"),gender:Object(h["get"])(t,"gender","MALE").toUpperCase()});var s=t,c=s.locationNumber,l=s.zipCode,u=s.zipCodeAddon;i={zipCode:l,zipCodeAddon:u,locationNumber:c}}else o.push({id:A["a"].defaultPersonId,dateOfBirth:"1999-01-01",gender:"MALE"});this.$nextTick((function(){r.addPromise((function(){return e.updateProductOptions({contractStartDate:n,persons:o,productIds:[e.productId],merge:!0})})),i&&r.addPromise((function(){return e.updateContractInformation({contractStartDate:n,location:i,persons:o})}))}))}},computed:G({},Object(a["c"])(["activeCollectivePartner","activePersonId","contractStartDate","collectiveInfo","getSelectedDoctorForProduct","getActivePerson","getGroupForProduct","getExclusiveProductIdsInBasket","getProductById","getProductContentById","getProductOptionsForPerson","getProductPriceByCriteria","getActivePersonProductSelectedCriteria","getAllProductsByGroupId","getAvailabilityLabelsByProduct","hasLabel","hasEmployersContribution","isProductInBasket","isAvailableProductForPerson","labelsLoaded","label","persons"]),{showMedicalOfficeSearch:function(){return Object(h["get"])(this,"productGroup.enableMedicalOffice",!1)},hasErrorMessage:function(){var e=this.activePersonId,t=this.isProductAvailable,r=this.hasOtherAvmProductInBasket;return e&&(!t||r)},personId:function(){return this.activePersonId?this.activePersonId:A["a"].defaultPersonId},product:function(){return this.getProductById(this.productId)},hasCollectiveChannel:function(){return!!this.activeCollectivePartner},hasCollectiveInfoText:function(){var e=this.collectiveInfo;return e&&!e.hideInfoText},collectiveInfoText:function(){var e=Object(h["get"])(this,"collectiveInfo.title","");return Object(h["get"])(this,"collectiveInfo.infoText","").replace("{title}",e)},medicalOfficeSearchLabel:function(){var e=g["c"].isMultiAccessGroup(this.productGroup.id)?"_medbase":"";return this.label("search_medical_office"+e)},doctor:function(){var e=this.personId,t=this.productId;return!(!e||!t)&&this.getSelectedDoctorForProduct(e,t)},isProductDisabled:function(){if(this.showMedicalOfficeSearch){if(!this.doctor)return!0;var e=Object(h["get"])(g["a"].productAVMtypes,this.productId,""),t=Object(h["get"])(this,"doctor.medicalOfficeNets",[]),r=t.find((function(t){return t.avmDefinition===e}));return!r}return!1},isProductAvailable:function(){var e=this.activePersonId,t=this.productId;return this.isAvailableProductForPerson(e,t)},availabilityLabels:function(){var e=this.product;return this.getAvailabilityLabelsByProduct(e)},errorDescription:function(){if(this.hasCollectiveChannel)return this.label("error_code_COLLECTIVE_CONTRACT_CONDITIONS_UNFULFILLED");var e=this.product,t=this.availabilityLabels;return e?t.tooltip:this.label("PRODUCT_NOT_AVAILABLE")},productName:function(){return Object(h["get"])(this.productContent,"name","")},productPrice:function(){var e=this.selectedCriteria;return e?this.getProductPriceByCriteria(this.activePersonId,this.productId,e):null},productContent:function(){return this.getProductContentById(this.productId)},productCriteria:function(){return Object(h["get"])(this.productOptions,"criteria")},productGroup:function(){var e=this.productId;return this.getGroupForProduct(e)},productOptions:function(){return this.getProductOptionsForPerson(this.personId,this.productId)},selectedCriteria:function(){return this.getActivePersonProductSelectedCriteria(this.productId)},hasOtherAvmProductInBasket:function(){var e=this.avmProductFromBasket;return!!e&&this.isCompilableAvmProduct},avmProductFromBasket:function(){if(this.activePersonId){var e=this.getActivePerson.products,t=this.productGroup;if(e&&t){var r=this.getAllProductsByGroupId(t.id);for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];if(this.productId!==o.id&&this.isProductInBasket(o.id,e))return this.getProductContentById(o.id)}}}return null},classes:function(){return{"widget--disabled":!this.isProductAvailable,"widget--reserved":this.isProductInBasket(this.activePersonId,this.productId),"widget--hasDoctor":this.doctor,"widget--active":this.activePersonId}}}),methods:G({},Object(a["b"])(["addProductToBasket","selectCriteriaOption","setActivePerson","updateProductOptions","updateContractInformation"]),{openMedicalOfficeSearch:function(){var e=this;this.$nextTick((function(){e.$sanitasModal.show("MedicalOfficeSearch")}))},getCriteriaText:function(e,t,r){var i=this.getProductContentById(e);return i&&i["".concat(t,"_").concat(r)]?i["".concat(t,"_").concat(r)]:this.label("include_".concat(t,"_").concat(r))},selectCriteria:function(e,t){t="object"===M(t)?t.category:t,this.selectCriteriaOption({productId:this.productId,criteriaCategory:e,optionCategory:t})},getSelectedOption:function(e){return this.activePersonId&&this.selectedCriteria?Object(B["a"])(this.productCriteria[e],this.selectedCriteria):this.productCriteria[e].defaultOption},switchPersonScope:function(e){this.setActivePerson(e.id)}})},F=z,q=(r("4a32"),r("dbad"),r("2877")),U=Object(q["a"])(F,p,f,!1,null,"5f14b788",null),V=U.exports,Q=r("748a");function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach((function(t){K(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function K(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var H=n["a"].extend({name:"Wrapper",components:{"price-widget":V},props:{productId:String,microserviceBaseUrl:{type:String,required:!0},resourceBaseUrl:{type:String,required:!0},language:{type:String,required:!0},contractStartDate:{type:String,required:!0},masterTreaty:{type:String,required:!0},collectiveContractNumber:{type:String},environment:{type:String,required:!0}},data:function(){return{config:A["a"],viewportLabel:this.$currentViewport.label,isDesktop:"desktop"===this.$currentViewport.label,isMobile:"mobile"===this.$currentViewport.label,isIE:!!document.documentMode,isMS:!1!==(document.documentMode||/Edge\//.test(navigator.userAgent)),isProduction:!0,isDevelopment:!1}},mounted:function(){var e=this;window.addEventListener("resize",(function(){window.requestAnimationFrame((function(){var t=e.$currentViewport.label;e.viewportLabel=t,e.isDesktop="desktop"===t,e.isMobile="mobile"===t}))}))},computed:Y({},Object(a["c"])({basketContractStartDate:"contractStartDate",basketLanguage:"language"}),{},Object(a["c"])(["labelsLoaded","persons"])),methods:Y({},Object(a["b"])(["setContract","setLanguage"])),created:function(){if(!this.$store.$backend){var e=new Q["a"]({store:this.$store,microserviceBaseUrl:this.microserviceBaseUrl,resourceBaseUrl:this.resourceBaseUrl});n["a"].use(e),this.$store.$backend=e}var t=this.language;if(this.basketLanguage&&this.basketLanguage===t&&this.labelsLoaded||this.setLanguage(t),!this.basketContractStartDate){var r=Object($["e"])(this.contractStartDate,$["c"]);Object(s["a"])(Object(c["a"])(r))&&(r=Object(l["a"])(Object(u["a"])(Object(d["a"])(new Date,1)),$["c"]));var i={contractStartDate:r,masterTreaty:this.masterTreaty};this.collectiveContractNumber&&(i.collectiveContractNumber=this.collectiveContractNumber),this.setContract(i)}}}),X=H,Z=Object(q["a"])(X,i,o,!1,null,null,null),J=Z.exports,ee=r("4360");r("f06c");function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ie(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}for(var oe=document.querySelectorAll(".priceWidget"),ne=0;ne<oe.length;ne++){var ae=oe[ne];new J({el:ae,propsData:re({},ae.dataset),store:ee["a"]})}},"3edc":function(e,t,r){"use strict";var i=r("e084"),o=r.n(i);o.a},"4a32":function(e,t,r){"use strict";var i=r("8b86"),o=r.n(i);o.a},"5c11":function(e,t,r){"use strict";var i=r("7a38"),o=r.n(i);o.a},"7a38":function(e,t,r){},"8b86":function(e,t,r){},"8bab8":function(e,t,r){"use strict";var i=r("1959"),o=r.n(i);o.a},ae29:function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.close,expression:"close"}],staticClass:"persons"},[r("div",{staticClass:"person person--active",on:{click:function(t){return e.toggleList()}}},[r("div",{staticClass:"person-name"},[r("span",{staticClass:"person-name__name"},[e._v(e._s(e.getFirstName(e.getActivePerson)))]),e.getAge(e.getActivePerson.dateOfBirth)>=0?r("span",{staticClass:"person-name__age"},[e._v("\n        ("+e._s(e.getAge(e.getActivePerson.dateOfBirth))+")\n      ")]):e._e()]),r("div",[r("ovp-price",{attrs:{prefix:"CHF",price:e.getTotalPriceForPerson(e.getActivePerson.id)}})],1),r("san-icon",{staticClass:"person__toggle",attrs:{name:"caret",direction:e.personListOpen?"up":"down",color:"original-green",size:40}})],1),r("transition",{attrs:{name:"persons"}},[e.personListOpen||e.$root.isDesktop?r("div",{staticClass:"list"},[e._l(e.persons,(function(t){return r("div",{key:t.id,class:e.getPersonListClasses(t),on:{click:function(r){return e.selectPerson(t)}}},[r("div",{staticClass:"person-name"},[r("span",{staticClass:"person-name__name"},[e._v(e._s(e.getFirstName(t)))]),e.getAge(t.dateOfBirth)>=0?r("span",{staticClass:"person-name__age"},[e._v("\n            ("+e._s(e.getAge(t.dateOfBirth))+")\n          ")]):e._e()]),r("div",[r("ovp-price",{attrs:{prefix:"CHF",price:e.getTotalPriceForPerson(t.id)}})],1)])})),r("div",{staticClass:"person person-edit",class:{"person--slim":e.useNarrowStyle},on:{click:function(t){return e.$emit("addPerson")}}},[r("san-icon",{attrs:{name:"ovp/edit-add_leer",size:e.$root.isDesktop?40:32}}),r("span",{staticClass:"person-edit__text"},[e._v(e._s(e.label("edit_persons")))])],1)],2):e._e()])],1)},o=[],n=r("2f62"),a=r("de76"),s=r("f87f"),c=r("1d42");function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=5,f={name:"PersonsBar",components:{OvpPrice:s["a"],SanIcon:a["f"]},props:{persons:{type:Array,required:!0},selected:{type:String},theme:{type:String,default:"configurator"},activeBorder:{type:Boolean,default:!1},narrow:{type:Boolean,default:!1}},data:function(){return{personListOpen:!1}},methods:{close:function(){this.personListOpen&&this.toggleList()},toggleList:function(){this.personListOpen=!this.personListOpen},getFirstName:function(e){var t=e.firstName;return t||this.label("person")+" "+e.order},selectPerson:function(e){this.$emit("selectPerson",e),this.toggleList()},getPersonListClasses:function(e){return{person:!0,"person--active":this.selected===e.id,"person--narrow":this.useNarrowStyle&&this.narrow}},getAge:c["g"],getAgeIcon:c["h"]},computed:u({},Object(n["c"])(["label","getActivePerson","getTotalPriceForPerson"]),{useNarrowStyle:function(){return this.narrow?this.persons.length>=p-1:this.persons.length===p}})},h=f,v=(r("3edc"),r("2877")),b=Object(v["a"])(h,i,o,!1,null,"39dd19ca",null);t["a"]=b.exports},cffa:function(e,t,r){},db6d:function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:e.classes},[r("div",{staticClass:"form"},[r("div",{staticClass:"line line--birthday"},[r("sanitas-date-input",{attrs:{required:"",isActive:"",lazy:"",autocomplete:"bday","data-test":"person_"+e.person.id+"_dateOfBirth",autofocus:e.autofocus&&!e.person.dateOfBirth,mask:"##.##.####",placeholder:e.label("date_placeholder"),name:"dataOfBirth["+e.uuid+"]",title:e.label("person_birthdate"),tooltip:e.label("person_birthdate_tooltip"),errors:e.validationErrorsGetter(e.validation.dateOfBirth)},on:{blur:e.setDateOfBirth},model:{value:e.validation.dateOfBirth.$model,callback:function(t){e.$set(e.validation.dateOfBirth,"$model",t)},expression:"validation.dateOfBirth.$model"}})],1),r("div",{staticClass:"line line--first-name"},[r("sanitas-text-input",{attrs:{isActive:"",lazy:"",autocomplete:"given-name","data-test":"person_"+e.person.id+"_firstName",autofocus:e.autofocus&&!!e.person.dateOfBirth,maxLength:35,name:"firstName["+e.uuid+"]",placeholder:e.label("person")+" "+e.person.order,title:e.label("person_surname"),errors:e.validationErrorsGetter(e.validation.firstName)},on:{blur:e.setFirstName},model:{value:e.validation.firstName.$model,callback:function(t){e.$set(e.validation.firstName,"$model","string"===typeof t?t.trim():t)},expression:"validation.firstName.$model"}})],1),e.rich?r("div",{staticClass:"line line--last-name"},[r("sanitas-text-input",{attrs:{isActive:"",lazy:"",autocomplete:"given-name","data-test":"person_"+e.person.id+"_lastName",maxLength:35,name:"lastName["+e.uuid+"]",placeholder:e.label("person_lastname"),title:e.label("person_lastname"),errors:e.validationErrorsGetter(e.validation.lastName)},on:{blur:e.setLastName},model:{value:e.validation.lastName.$model,callback:function(t){e.$set(e.validation.lastName,"$model",t)},expression:"validation.lastName.$model"}}),e.isLastNameCopyable?r("a",{staticClass:"copy-link",on:{click:e.copyLastName}},[e._v("\n        "+e._s(e.label("person_copy_lastname"))+"\n      ")]):e._e()],1):e._e(),r("div",{staticClass:"line line--gender line--hack"},[r("sanitas-radio-group",{attrs:{required:"",horizontal:"","show-label":"",type:"icon","data-test":"person_"+e.person.id+"_gender",name:"gender["+e.uuid+"]",tooltip:e.label("person_gender_tooltip"),items:e.genders,errors:e.validationErrorsGetter(e.validation.gender)},model:{value:e.validation.gender.$model,callback:function(t){e.$set(e.validation.gender,"$model",t)},expression:"validation.gender.$model"}})],1),e.$root.isDesktop?[!e.hideActions&&e.deletable?r("div",{staticClass:"line_actions"},[r("sanitas-button",{staticClass:"deleteBtn",attrs:{plain:"",type:"button","data-test":"person_"+e.person.id+"_deleteButton"},on:{click:e.deletePerson}},[r("sanitas-icon",{attrs:{name:"ovp/delete",size:32}})],1)],1):e._e()]:[!e.hideActions&&e.deletable?r("div",{staticClass:"line"},[r("sanitas-button",{staticClass:"deleteBtn",attrs:{secondary:"","data-test":"person_"+e.person.id+"_deleteButton"},on:{click:e.deletePerson}},[e._v("\n          "+e._s(e.label("person_remove"))+"\n        ")])],1):e._e()]],2),e.personGroups.length>1?r("div",{staticClass:"form"},[r("div",{staticClass:"line line--large"},[r("sanitas-drop-down",{attrs:{required:"","data-test":"person_"+e.person.id+"_personGroup",errors:e.validationErrorsGetter(e.validation.personGroup),options:e.personGroups,title:e.label("collective_personGroups_dropdown_label")},model:{value:e.validation.personGroup.$model,callback:function(t){e.$set(e.validation.personGroup,"$model",t)},expression:"validation.personGroup.$model"}})],1)]):e._e(),r("sanitas-button",{staticStyle:{display:"none"},attrs:{type:"submit"}})],1)},o=[],n=r("11c1"),a=r.n(n),s=r("2ef0"),c=r("2f62"),l=r("a7e4"),u=r("ba1e"),d=r("e3ee"),p=r("de76");function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e){return!!Object(l["a"])(e)&&Object(u["a"])(e)}var m={name:"Person",components:{SanitasTextInput:p["n"],SanitasDateInput:p["d"],SanitasRadioGroup:p["j"],SanitasIcon:p["f"],SanitasButton:p["a"],SanitasDropDown:p["e"]},props:{person:{type:Object,required:!0},validation:{type:Object},validationErrorsGetter:{type:Function},autofocus:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1},rich:{type:Boolean,default:!1},hideActions:{type:Boolean,default:!1},personGroups:{type:Array,default:function(){return[]}}},created:function(){this.uuid=a.a.v4()},computed:h({},Object(c["c"])(["label","persons"]),{classes:function(){return{person:!0,"person--rich":this.rich,"person--hide-actions":this.hideActions}},isLastNameCopyable:function(){var e=this.person,t=e.lastName,r=e.order;return!Object(s["isEmpty"])(this.firstLastName)&&this.firstLastName!==t&&1!==r},firstLastName:function(){return Object(s["get"])(this,"persons[0].lastName",!1)},isUnborn:function(){return b(Object(d["a"])(this.person.dateOfBirth))},genders:function(){var e=[{value:"UNBORN",text:this.label("gender_unborn"),icon:"ovp/buggy_circled".concat("UNBORN"===this.person.gender?"_hover":""),iconSize:32,disabled:!this.isUnborn}];if(this.isUnborn)return e;var t=[{value:"MALE",text:this.label("gender_male"),icon:"ovp/male_circled".concat("MALE"===this.person.gender?"_hover":""),iconSize:32},{value:"FEMALE",text:this.label("gender_female"),icon:"ovp/female_circled".concat("FEMALE"===this.person.gender?"_hover":""),iconSize:32}];return t.concat(e)}}),methods:{deletePerson:function(e){e.preventDefault(),this.$emit("delete",this.person)},setDateOfBirth:function(e){var t=this;this.$nextTick((function(){t.person.dateOfBirth=e}))},setFirstName:function(e){this.person.firstName=e},setLastName:function(e){this.$set(this.person,"lastName",Object(s["isEmpty"])(e)?null:e)},copyLastName:function(){this.setLastName(this.firstLastName),this.validation.lastName.$model=this.firstLastName,this.validation.lastName.$touch()},proveGender:function(){this.isUnborn?this.person.gender="UNBORN":"UNBORN"===this.person.gender&&(this.person.gender=null)}},watch:{personGroups:function(e){1===e.length&&(this.validation.personGroup.$model=e[0].value)},"person.dateOfBirth":{handler:function(e,t){e!==t&&this.proveGender()}}}},g=m,_=(r("5c11"),r("2877")),O=Object(_["a"])(g,i,o,!1,null,"00de8d9e",null);t["a"]=O.exports},dbad:function(e,t,r){"use strict";var i=r("cffa"),o=r.n(i);o.a},e084:function(e,t,r){},fa5e:function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("medical-office-modal",{attrs:{name:"MedicalOfficeSearch","initial-view":"list",product:e.product,"search-options":e.searchOptions,"contract-start-date":e.contractStartDate},on:{"office-changed":e.updateDoctor}})},o=[],n=r("2ef0"),a=r("2f62"),s=r("6e7d");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d={name:"Search",props:{contractStartDate:{type:String,required:!0},product:{type:Object,required:!0}},created:function(){this.initializeMedicalService()},computed:l({},Object(a["c"])(["label","address","activePersonId","getProductById","getProductsForPerson","getSelectedDoctorForProduct"]),{searchOptions:function(){return{location:this.address}},labelSuffix:function(){var e=Object(n["get"])(s["a"].productAVMtypes,this.product.id,"");return"_".concat(e.toLowerCase())},hasDoctor:function(){return this.doctor&&null!==this.doctor},doctor:function(){return this.getSelectedDoctorForProduct(this.activePersonId,this.product.id)},doctorName:function(){var e=this.doctor,t=e.lastName,r=e.firstName,i=e.zipCode,o=e.town,n=[r,t].join(" ").trim();return"".concat(n,", ").concat(i," ").concat(o)},labels:function(){return{sanitas:{postAddress:this.label("sanitas_post_address"),phoneNumber:this.label("phoneNr")},form:{submit:this.label("medicalofficesearch_button_submit_text"+this.labelSuffix),title:this.label("medicalofficesearch_title"+this.labelSuffix),input:this.label("medicalofficesearch_docpraxis_title"+this.labelSuffix),zipCode:{title:this.label("zip_chooser_label"),placeholder:this.label("zip_chooser_placeholder")},errors:{keyRequired:this.label("errorTexts_KEY_REQUIRED"),noResults:this.label("zip_chooser_noResuts"),serviceNotAvailable:this.label("general_error")},filters:{title:this.label("medicalofficesearch_filters_title"),medbase:this.label("medicalofficesearch_filter_medbase"),caremed:this.label("medicalofficesearch_filter_caremed"),netmed:this.label("medicalofficesearch_filter_netmed"),patients:this.label("medicalofficesearch_filter_patients")}},type:{caremed:this.label("medicalofficesearch_type_caremed"),medbase:this.label("medicalofficesearch_type_medbase"),netmed:this.label("medicalofficesearch_type_netmed"),patients:this.label("medicalofficesearch_type_patients")},states:{all:this.label("medicalofficesearch_accepts_all_title"),children:this.label("medicalofficesearch_accepts_children_title"),familyMembers:this.label("medicalofficesearch_accepts_familymembers_title"),nobody:this.label("medicalofficesearch_accepts_nobody_title"),notEligible:this.label("medicalofficesearch_accepts_not_eligible_title"),unknown:this.label("medicalofficesearch_accepts_unknown_title")},toggle:{map:this.label("toggle_card"),list:this.label("toggle_list")},messages:{noResults:this.label("medicalofficesearch_noresults_title"+this.labelSuffix),moreResults:this.label("medicalofficesearch_moreresults_title"),confirm:{office:{title:this.label("medicalofficesearch_confirm_office_title"+this.labelSuffix),description:this.label("medicalofficesearch_confirm_office_description"+this.labelSuffix),cancel:this.label("medicalofficesearch_confirm_office_cancel"),confirm:this.label("medicalofficesearch_confirm_office_confirm")},product:{title:this.label("medicalofficesearch_confirm_product_title"),description:this.label("medicalofficesearch_confirm_product_description"),cancel:this.label("medicalofficesearch_confirm_product_cancel"),confirm:this.label("medicalofficesearch_confirm_product_confirm")}}}}}}),methods:l({},Object(a["b"])(["setUiDoctor","addProductToBasket"]),{initializeMedicalService:function(){var e=this;this.$sanitasMedicalService.setOptions({labels:this.labels,viewPort:this.$root.viewportLabel,callbacks:{getProduct:function(t){return e.getProductById(t)},getLocations:function(t){return e.$backend.locations.getLocations(t)},findProviders:function(t){return e.$backend.medicalSearch.findProviders(t)}}})},openSearchMap:function(){this.$sanitasModal.show("MedicalOfficeSearch")},updateDoctor:function(e){var t={doctor:e,productId:this.product.id,personId:this.activePersonId};this.setUiDoctor(t),this.addProductToBasket(t)}})},p=d,f=r("2877"),h=Object(f["a"])(p,i,o,!1,null,"6ad9a170",null);t["a"]=h.exports}});
//# sourceMappingURL=priceWidget.js.map